/* 棋盘容器 */
.chessboard {
  display: inline-block; /* 使棋盘宽度适应内容 */
  border: 4rpx solid #333; /* 加粗边框 */
  box-shadow: 0 8rpx 16rpx rgba(0, 0, 0, 0.3); /* 添加阴影效果 */
  background-color: #f0d9b5; /* 设置背景色 */
}

/* 默认木质主题 */
.wood {
  background-color: #f0d9b5;
}

.wood .cell {
  background-color: #f0d9b5; /* 浅色格子 */
}

.wood .cell.dark {
  background-color: #b58863;
  background: #b58863;
}

/* 天空幻境主题 */
.light-blue {
  background-color: #b0d9f0;
}

.light-blue .cell {
  background-color: #d0e9f0; /* 浅蓝格子 */
}

.light-blue .cell.dark {
  background-color: #a0c0d0;
  background: #a0c0d0;
}

/* 玫瑰金主题 */
.golden {
  background-color: #f0d0d0;
}

.golden .cell {
  background-color: #f0e0d0; /* 浅金色格子 */
}

.golden .cell.dark {
  background-color: #d0b8b8;
  background: #d0b8b8;
}

/* 棋盘行 */
.row {
  display: flex;
  flex-direction: row;
}

/* 基本容器与触摸优化 */
.board {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

/* 棋盘格子 */
.cell {
  width: 70rpx;
  height: 70rpx;
  border: 1rpx solid #f0d9b5;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: #f0d9b5; /* 浅色格子 */
  position: relative;
  box-sizing: border-box;
  pointer-events: auto;
}

/* 深色格子 */
.cell.dark {
  background-color: #b58863;
  background: #b58863;
}

/* 浅色格子 */
.cell.light {
  background: #f0d9b5;
}

/* 棋子容器：请在 wxml 中使用 class="piece" */
.piece {
  width: 80%;
  height: 80%;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  -webkit-user-drag: none;
  user-drag: none;
  touch-action: none;
  transition: transform 120ms ease, box-shadow 120ms ease;
  pointer-events: auto;
}

/* 选中状态高亮（立即生效） */
.selected {
  outline: 2px solid rgba(30,144,255,0.9);
  box-shadow: 0 0 8px rgba(30,144,255,0.12);
  z-index: 40;
}

/* 可落子目标高亮 */
.target {
  box-shadow: inset 0 0 0 3px rgba(255,215,0,0.35);
}

/* 拖拽中的棋子 */
.dragging {
  transition: none !important;
  transform: scale(1.04);
  z-index: 60;
  opacity: 0.95;
  pointer-events: none;
}

/* 悬停效果 */
.cell:hover {
  opacity: 0.8;
  transform: scale(1.05);
  transition: all 0.2s ease-in-out;
}

/* 强化选中与目标高亮样式 */
.cell.selected {
  outline: 2px solid rgba(30,144,255,0.95);
  box-shadow: 0 0 10rpx rgba(30,144,255,0.18);
  z-index: 40;
}

/* 可落子目标高亮（作用于单元格） */
.cell.target {
  box-shadow: inset 0 0 0 6rpx rgba(255,215,0,0.30);
}

/* 避免 :hover 在某些小程序环境不支持导致问题，保留简单交互 */
.cell:hover {
  opacity: 0.92;
  transform: scale(1.02);
  transition: all 0.12s ease-in-out;
}

/* 强化整格选中高亮：整格背景叠加 + 内阴影边框 */
.cell.selected {
  /* 覆盖底色，使用半透明蓝色叠加使整格高亮明显 */
  background-image: linear-gradient(rgba(30,144,255,0.12), rgba(30,144,255,0.12));
  /* 保留原有深浅底色的视觉，但以叠加色为主 */
  background-blend-mode: overlay;
  /* 明显的内阴影作为边框高亮 */
  box-shadow: inset 0 0 0 6rpx rgba(30,144,255,0.22), 0 6rpx 12rpx rgba(0,0,0,0.06);
  border-radius: 4rpx;
  z-index: 45;
  transform: translateZ(0);
  transition: box-shadow 120ms ease, background-image 120ms ease, transform 120ms ease;
}

/* 选中格子内棋子视觉微调（避免棋子自身 outline 覆盖整格） */
.cell.selected .piece {
  outline: none;
  box-shadow: none;
  transform: scale(1.02);
}

/* 强化整格目标高亮：黄色半透明背景 + 更粗内阴影 */
.cell.target {
  background-image: linear-gradient(rgba(255,215,0,0.14), rgba(255,215,0,0.14));
  background-blend-mode: overlay;
  box-shadow: inset 0 0 0 8rpx rgba(255,215,0,0.30);
  border-radius: 4rpx;
  z-index: 42;
  transition: box-shadow 100ms ease, background-image 100ms ease;
}

/* 若同时是选中与目标（极少见）以选中优先 */
.cell.selected.target {
  box-shadow: inset 0 0 0 6rpx rgba(30,144,255,0.22), 0 8rpx 16rpx rgba(0,0,0,0.08);
  background-image: linear-gradient(rgba(30,144,255,0.12), rgba(30,144,255,0.12));
}

/* 保持悬停微交互但不盖过高亮效果 */
.cell:hover {
  transform: translateY(-2rpx);
}